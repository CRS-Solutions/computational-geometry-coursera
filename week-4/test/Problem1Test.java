import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

import static org.junit.Assert.assertEquals;

public class Problem1Test {
    @Test
    public void test1() {
        final List<Problem1.Point> points = parsePoints("-6 1 -4 -1 1 1 2 -2 6 2 2 6 -2 5 -2 2");
        final List<Problem1.DiagonalResult> expected = parseResult("-6 1 1 1 INTERNAL -6 1 2 -2 INTERSECT -6 1 6 2 INTERNAL -6 1 2 6 INTERSECT -6 1 -2 5 EXTERNAL -4 -1 2 -2 EXTERNAL -4 -1 6 2 INTERSECT -4 -1 2 6 INTERNAL -4 -1 -2 5 INTERSECT -4 -1 -2 2 INTERNAL 1 1 6 2 INTERNAL 1 1 2 6 INTERNAL 1 1 -2 5 INTERNAL 1 1 -2 2 INTERNAL 2 -2 2 6 INTERNAL 2 -2 -2 5 INTERSECT 2 -2 -2 2 INTERSECT 6 2 -2 5 INTERNAL 6 2 -2 2 INTERNAL 2 6 -2 2 INTERNAL");
        final List<Problem1.DiagonalResult> actual = Problem1.solve(points);
        assertEquals(expected, actual);
    }

    @Test
    public void test2() {
        final List<Problem1.Point> points = parsePoints("164 -495 -362 -582 826 -632 32 208 -980 227 -799 -306 -838 -301 -17 -482 260 -343 242 -605 30 -582 -73 -591 120 -530 188 -559 209 -405 134 -490 -665 -594 103 -505 125 -500 174 -473 162 -512 -105 -561 -8 -530 27 -529 118 -507 101 -516 120 -517 155 -497 -274 -579 -196 -558 -30 -532 52 -514 -260 -566 -252 -564 -45 -530 -9 -524");
        final List<Problem1.DiagonalResult> expected = parseResult("164 -495 826 -632 INTERSECT\n" +
                "164 -495 32 208 INTERSECT\n" +
                "164 -495 -980 227 INTERSECT\n" +
                "164 -495 -799 -306 INTERSECT\n" +
                "164 -495 -838 -301 INTERSECT\n" +
                "164 -495 -17 -482 INTERSECT\n" +
                "164 -495 260 -343 INTERSECT\n" +
                "164 -495 242 -605 INTERSECT\n" +
                "164 -495 30 -582 INTERSECT\n" +
                "164 -495 -73 -591 INTERSECT\n" +
                "164 -495 120 -530 INTERSECT\n" +
                "164 -495 188 -559 INTERSECT\n" +
                "164 -495 209 -405 INTERSECT\n" +
                "164 -495 134 -490 INTERSECT\n" +
                "164 -495 -665 -594 INTERSECT\n" +
                "164 -495 103 -505 EXTERNAL\n" +
                "164 -495 125 -500 EXTERNAL\n" +
                "164 -495 174 -473 EXTERNAL\n" +
                "164 -495 162 -512 EXTERNAL\n" +
                "164 -495 -105 -561 INTERSECT\n" +
                "164 -495 -8 -530 INTERSECT\n" +
                "164 -495 27 -529 INTERSECT\n" +
                "164 -495 118 -507 INTERSECT\n" +
                "164 -495 101 -516 INTERSECT\n" +
                "164 -495 120 -517 EXTERNAL\n" +
                "164 -495 155 -497 EXTERNAL\n" +
                "164 -495 -274 -579 EXTERNAL\n" +
                "164 -495 -196 -558 INTERSECT\n" +
                "164 -495 -30 -532 EXTERNAL\n" +
                "164 -495 52 -514 EXTERNAL\n" +
                "164 -495 -260 -566 INTERSECT\n" +
                "164 -495 -252 -564 INTERNAL\n" +
                "164 -495 -45 -530 INTERNAL\n" +
                "-362 -582 32 208 INTERSECT\n" +
                "-362 -582 -980 227 INTERSECT\n" +
                "-362 -582 -799 -306 INTERSECT\n" +
                "-362 -582 -838 -301 INTERSECT\n" +
                "-362 -582 -17 -482 INTERSECT\n" +
                "-362 -582 260 -343 INTERSECT\n" +
                "-362 -582 242 -605 INTERNAL\n" +
                "-362 -582 30 -582 INTERSECT\n" +
                "-362 -582 -73 -591 INTERNAL\n" +
                "-362 -582 120 -530 INTERSECT\n" +
                "-362 -582 188 -559 INTERSECT\n" +
                "-362 -582 209 -405 INTERSECT\n" +
                "-362 -582 134 -490 INTERSECT\n" +
                "-362 -582 -665 -594 EXTERNAL\n" +
                "-362 -582 103 -505 EXTERNAL\n" +
                "-362 -582 125 -500 INTERSECT\n" +
                "-362 -582 174 -473 INTERSECT\n" +
                "-362 -582 162 -512 INTERSECT\n" +
                "-362 -582 -105 -561 INTERSECT\n" +
                "-362 -582 -8 -530 INTERSECT\n" +
                "-362 -582 27 -529 INTERSECT\n" +
                "-362 -582 118 -507 INTERSECT\n" +
                "-362 -582 101 -516 INTERSECT\n" +
                "-362 -582 120 -517 INTERSECT\n" +
                "-362 -582 155 -497 INTERSECT\n" +
                "-362 -582 -274 -579 INTERNAL\n" +
                "-362 -582 -196 -558 INTERNAL\n" +
                "-362 -582 -30 -532 INTERNAL\n" +
                "-362 -582 52 -514 INTERSECT\n" +
                "-362 -582 -260 -566 INTERNAL\n" +
                "-362 -582 -252 -564 INTERNAL\n" +
                "-362 -582 -45 -530 INTERNAL\n" +
                "-362 -582 -9 -524 INTERNAL\n" +
                "826 -632 -980 227 INTERSECT\n" +
                "826 -632 -799 -306 INTERSECT\n" +
                "826 -632 -838 -301 INTERSECT\n" +
                "826 -632 -17 -482 INTERSECT\n" +
                "826 -632 260 -343 INTERNAL\n" +
                "826 -632 242 -605 INTERNAL\n" +
                "826 -632 30 -582 INTERSECT\n" +
                "826 -632 -73 -591 INTERNAL\n" +
                "826 -632 120 -530 INTERSECT\n" +
                "826 -632 188 -559 INTERSECT\n" +
                "826 -632 209 -405 INTERSECT\n" +
                "826 -632 134 -490 INTERSECT\n" +
                "826 -632 -665 -594 EXTERNAL\n" +
                "826 -632 103 -505 INTERSECT\n" +
                "826 -632 125 -500 INTERSECT\n" +
                "826 -632 174 -473 INTERSECT\n" +
                "826 -632 162 -512 INTERSECT\n" +
                "826 -632 -105 -561 INTERSECT\n" +
                "826 -632 -8 -530 INTERSECT\n" +
                "826 -632 27 -529 INTERSECT\n" +
                "826 -632 118 -507 INTERSECT\n" +
                "826 -632 101 -516 INTERSECT\n" +
                "826 -632 120 -517 INTERSECT\n" +
                "826 -632 155 -497 INTERSECT\n" +
                "826 -632 -274 -579 INTERSECT\n" +
                "826 -632 -196 -558 INTERSECT\n" +
                "826 -632 -30 -532 INTERSECT\n" +
                "826 -632 52 -514 INTERSECT\n" +
                "826 -632 -260 -566 INTERSECT\n" +
                "826 -632 -252 -564 INTERSECT\n" +
                "826 -632 -45 -530 INTERSECT\n" +
                "826 -632 -9 -524 INTERSECT\n" +
                "32 208 -799 -306 INTERNAL\n" +
                "32 208 -838 -301 INTERSECT\n" +
                "32 208 -17 -482 INTERNAL\n" +
                "32 208 260 -343 INTERNAL\n" +
                "32 208 242 -605 INTERSECT\n" +
                "32 208 30 -582 INTERSECT\n" +
                "32 208 -73 -591 INTERSECT\n" +
                "32 208 120 -530 INTERSECT\n" +
                "32 208 188 -559 INTERSECT\n" +
                "32 208 209 -405 INTERSECT\n" +
                "32 208 134 -490 INTERSECT\n" +
                "32 208 -665 -594 INTERSECT\n" +
                "32 208 103 -505 INTERSECT\n" +
                "32 208 125 -500 INTERSECT\n" +
                "32 208 174 -473 INTERSECT\n" +
                "32 208 162 -512 INTERSECT\n" +
                "32 208 -105 -561 INTERSECT\n" +
                "32 208 -8 -530 INTERSECT\n" +
                "32 208 27 -529 INTERSECT\n" +
                "32 208 118 -507 INTERSECT\n" +
                "32 208 101 -516 INTERSECT\n" +
                "32 208 120 -517 INTERSECT\n" +
                "32 208 155 -497 INTERSECT\n" +
                "32 208 -274 -579 INTERSECT\n" +
                "32 208 -196 -558 INTERSECT\n" +
                "32 208 -30 -532 INTERSECT\n" +
                "32 208 52 -514 INTERSECT\n" +
                "32 208 -260 -566 INTERSECT\n" +
                "32 208 -252 -564 INTERSECT\n" +
                "32 208 -45 -530 INTERSECT\n" +
                "32 208 -9 -524 INTERSECT\n" +
                "-980 227 -838 -301 EXTERNAL\n" +
                "-980 227 -17 -482 INTERNAL\n" +
                "-980 227 260 -343 INTERNAL\n" +
                "-980 227 242 -605 INTERSECT\n" +
                "-980 227 30 -582 INTERSECT\n" +
                "-980 227 -73 -591 INTERSECT\n" +
                "-980 227 120 -530 INTERSECT\n" +
                "-980 227 188 -559 INTERSECT\n" +
                "-980 227 209 -405 INTERSECT\n" +
                "-980 227 134 -490 INTERSECT\n" +
                "-980 227 -665 -594 INTERSECT\n" +
                "-980 227 103 -505 INTERSECT\n" +
                "-980 227 125 -500 INTERSECT\n" +
                "-980 227 174 -473 INTERSECT\n" +
                "-980 227 162 -512 INTERSECT\n" +
                "-980 227 -105 -561 INTERSECT\n" +
                "-980 227 -8 -530 INTERSECT\n" +
                "-980 227 27 -529 INTERSECT\n" +
                "-980 227 118 -507 INTERSECT\n" +
                "-980 227 101 -516 INTERSECT\n" +
                "-980 227 120 -517 INTERSECT\n" +
                "-980 227 155 -497 INTERSECT\n" +
                "-980 227 -274 -579 INTERSECT\n" +
                "-980 227 -196 -558 INTERSECT\n" +
                "-980 227 -30 -532 INTERSECT\n" +
                "-980 227 52 -514 INTERSECT\n" +
                "-980 227 -260 -566 INTERSECT\n" +
                "-980 227 -252 -564 INTERSECT\n" +
                "-980 227 -45 -530 INTERSECT\n" +
                "-980 227 -9 -524 INTERSECT\n" +
                "-799 -306 -17 -482 INTERNAL\n" +
                "-799 -306 260 -343 INTERNAL\n" +
                "-799 -306 242 -605 INTERSECT\n" +
                "-799 -306 30 -582 INTERSECT\n" +
                "-799 -306 -73 -591 INTERSECT\n" +
                "-799 -306 120 -530 INTERSECT\n" +
                "-799 -306 188 -559 INTERSECT\n" +
                "-799 -306 209 -405 INTERSECT\n" +
                "-799 -306 134 -490 INTERSECT\n" +
                "-799 -306 -665 -594 INTERSECT\n" +
                "-799 -306 103 -505 INTERSECT\n" +
                "-799 -306 125 -500 INTERSECT\n" +
                "-799 -306 174 -473 INTERSECT\n" +
                "-799 -306 162 -512 INTERSECT\n" +
                "-799 -306 -105 -561 INTERSECT\n" +
                "-799 -306 -8 -530 INTERSECT\n" +
                "-799 -306 27 -529 INTERSECT\n" +
                "-799 -306 118 -507 INTERSECT\n" +
                "-799 -306 101 -516 INTERSECT\n" +
                "-799 -306 120 -517 INTERSECT\n" +
                "-799 -306 155 -497 INTERSECT\n" +
                "-799 -306 -274 -579 INTERSECT\n" +
                "-799 -306 -196 -558 INTERSECT\n" +
                "-799 -306 -30 -532 INTERSECT\n" +
                "-799 -306 52 -514 INTERSECT\n" +
                "-799 -306 -260 -566 INTERSECT\n" +
                "-799 -306 -252 -564 INTERSECT\n" +
                "-799 -306 -45 -530 INTERSECT\n" +
                "-799 -306 -9 -524 INTERSECT\n" +
                "-838 -301 260 -343 INTERSECT\n" +
                "-838 -301 242 -605 INTERSECT\n" +
                "-838 -301 30 -582 INTERSECT\n" +
                "-838 -301 -73 -591 INTERSECT\n" +
                "-838 -301 120 -530 INTERSECT\n" +
                "-838 -301 188 -559 INTERSECT\n" +
                "-838 -301 209 -405 INTERSECT\n" +
                "-838 -301 134 -490 INTERSECT\n" +
                "-838 -301 -665 -594 EXTERNAL\n" +
                "-838 -301 103 -505 INTERSECT\n" +
                "-838 -301 125 -500 INTERSECT\n" +
                "-838 -301 174 -473 INTERSECT\n" +
                "-838 -301 162 -512 INTERSECT\n" +
                "-838 -301 -105 -561 INTERSECT\n" +
                "-838 -301 -8 -530 INTERSECT\n" +
                "-838 -301 27 -529 INTERSECT\n" +
                "-838 -301 118 -507 INTERSECT\n" +
                "-838 -301 101 -516 INTERSECT\n" +
                "-838 -301 120 -517 INTERSECT\n" +
                "-838 -301 155 -497 INTERSECT\n" +
                "-838 -301 -274 -579 INTERSECT\n" +
                "-838 -301 -196 -558 INTERSECT\n" +
                "-838 -301 -30 -532 INTERSECT\n" +
                "-838 -301 52 -514 INTERSECT\n" +
                "-838 -301 -260 -566 INTERSECT\n" +
                "-838 -301 -252 -564 INTERSECT\n" +
                "-838 -301 -45 -530 INTERSECT\n" +
                "-838 -301 -9 -524 INTERSECT\n" +
                "-17 -482 242 -605 INTERSECT\n" +
                "-17 -482 30 -582 INTERSECT\n" +
                "-17 -482 -73 -591 INTERSECT\n" +
                "-17 -482 120 -530 INTERSECT\n" +
                "-17 -482 188 -559 INTERSECT\n" +
                "-17 -482 209 -405 EXTERNAL\n" +
                "-17 -482 134 -490 EXTERNAL\n" +
                "-17 -482 -665 -594 EXTERNAL\n" +
                "-17 -482 103 -505 INTERSECT\n" +
                "-17 -482 125 -500 INTERSECT\n" +
                "-17 -482 174 -473 INTERSECT\n" +
                "-17 -482 162 -512 INTERSECT\n" +
                "-17 -482 -105 -561 INTERSECT\n" +
                "-17 -482 -8 -530 INTERSECT\n" +
                "-17 -482 27 -529 INTERSECT\n" +
                "-17 -482 118 -507 INTERSECT\n" +
                "-17 -482 101 -516 INTERSECT\n" +
                "-17 -482 120 -517 INTERSECT\n" +
                "-17 -482 155 -497 INTERSECT\n" +
                "-17 -482 -274 -579 INTERSECT\n" +
                "-17 -482 -196 -558 INTERSECT\n" +
                "-17 -482 -30 -532 INTERSECT\n" +
                "-17 -482 52 -514 INTERSECT\n" +
                "-17 -482 -260 -566 INTERSECT\n" +
                "-17 -482 -252 -564 INTERSECT\n" +
                "-17 -482 -45 -530 INTERSECT\n" +
                "-17 -482 -9 -524 INTERSECT\n" +
                "260 -343 30 -582 INTERSECT\n" +
                "260 -343 -73 -591 INTERSECT\n" +
                "260 -343 120 -530 INTERSECT\n" +
                "260 -343 188 -559 EXTERNAL\n" +
                "260 -343 209 -405 EXTERNAL\n" +
                "260 -343 134 -490 EXTERNAL\n" +
                "260 -343 -665 -594 INTERSECT\n" +
                "260 -343 103 -505 INTERSECT\n" +
                "260 -343 125 -500 INTERSECT\n" +
                "260 -343 174 -473 INTERSECT\n" +
                "260 -343 162 -512 INTERSECT\n" +
                "260 -343 -105 -561 INTERSECT\n" +
                "260 -343 -8 -530 INTERSECT\n" +
                "260 -343 27 -529 INTERSECT\n" +
                "260 -343 118 -507 INTERSECT\n" +
                "260 -343 101 -516 INTERSECT\n" +
                "260 -343 120 -517 INTERSECT\n" +
                "260 -343 155 -497 INTERSECT\n" +
                "260 -343 -274 -579 INTERSECT\n" +
                "260 -343 -196 -558 INTERSECT\n" +
                "260 -343 -30 -532 INTERSECT\n" +
                "260 -343 52 -514 INTERSECT\n" +
                "260 -343 -260 -566 INTERSECT\n" +
                "260 -343 -252 -564 INTERSECT\n" +
                "260 -343 -45 -530 INTERSECT\n" +
                "260 -343 -9 -524 INTERSECT\n" +
                "242 -605 -73 -591 INTERNAL\n" +
                "242 -605 120 -530 EXTERNAL\n" +
                "242 -605 188 -559 EXTERNAL\n" +
                "242 -605 209 -405 EXTERNAL\n" +
                "242 -605 134 -490 INTERSECT\n" +
                "242 -605 -665 -594 INTERSECT\n" +
                "242 -605 103 -505 INTERSECT\n" +
                "242 -605 125 -500 INTERSECT\n" +
                "242 -605 174 -473 INTERSECT\n" +
                "242 -605 162 -512 INTERSECT\n" +
                "242 -605 -105 -561 INTERSECT\n" +
                "242 -605 -8 -530 INTERSECT\n" +
                "242 -605 27 -529 INTERSECT\n" +
                "242 -605 118 -507 INTERSECT\n" +
                "242 -605 101 -516 INTERSECT\n" +
                "242 -605 120 -517 INTERSECT\n" +
                "242 -605 155 -497 INTERSECT\n" +
                "242 -605 -274 -579 INTERSECT\n" +
                "242 -605 -196 -558 INTERSECT\n" +
                "242 -605 -30 -532 INTERSECT\n" +
                "242 -605 52 -514 INTERSECT\n" +
                "242 -605 -260 -566 INTERSECT\n" +
                "242 -605 -252 -564 INTERSECT\n" +
                "242 -605 -45 -530 INTERSECT\n" +
                "242 -605 -9 -524 INTERSECT\n" +
                "30 -582 120 -530 EXTERNAL\n" +
                "30 -582 188 -559 EXTERNAL\n" +
                "30 -582 209 -405 INTERSECT\n" +
                "30 -582 134 -490 INTERSECT\n" +
                "30 -582 -665 -594 INTERSECT\n" +
                "30 -582 103 -505 INTERSECT\n" +
                "30 -582 125 -500 INTERSECT\n" +
                "30 -582 174 -473 INTERSECT\n" +
                "30 -582 162 -512 INTERSECT\n" +
                "30 -582 -105 -561 INTERSECT\n" +
                "30 -582 -8 -530 INTERSECT\n" +
                "30 -582 27 -529 INTERSECT\n" +
                "30 -582 118 -507 INTERSECT\n" +
                "30 -582 101 -516 INTERSECT\n" +
                "30 -582 120 -517 INTERSECT\n" +
                "30 -582 155 -497 INTERSECT\n" +
                "30 -582 -274 -579 INTERSECT\n" +
                "30 -582 -196 -558 INTERSECT\n" +
                "30 -582 -30 -532 INTERSECT\n" +
                "30 -582 52 -514 INTERSECT\n" +
                "30 -582 -260 -566 INTERSECT\n" +
                "30 -582 -252 -564 INTERSECT\n" +
                "30 -582 -45 -530 INTERSECT\n" +
                "30 -582 -9 -524 INTERSECT\n" +
                "-73 -591 188 -559 EXTERNAL\n" +
                "-73 -591 209 -405 INTERSECT\n" +
                "-73 -591 134 -490 INTERSECT\n" +
                "-73 -591 -665 -594 INTERSECT\n" +
                "-73 -591 103 -505 INTERSECT\n" +
                "-73 -591 125 -500 INTERSECT\n" +
                "-73 -591 174 -473 INTERSECT\n" +
                "-73 -591 162 -512 INTERNAL\n" +
                "-73 -591 -105 -561 INTERNAL\n" +
                "-73 -591 -8 -530 INTERSECT\n" +
                "-73 -591 27 -529 INTERSECT\n" +
                "-73 -591 118 -507 INTERSECT\n" +
                "-73 -591 101 -516 INTERSECT\n" +
                "-73 -591 120 -517 INTERSECT\n" +
                "-73 -591 155 -497 INTERSECT\n" +
                "-73 -591 -274 -579 INTERNAL\n" +
                "-73 -591 -196 -558 INTERSECT\n" +
                "-73 -591 -30 -532 INTERSECT\n" +
                "-73 -591 52 -514 INTERSECT\n" +
                "-73 -591 -260 -566 INTERSECT\n" +
                "-73 -591 -252 -564 INTERSECT\n" +
                "-73 -591 -45 -530 INTERSECT\n" +
                "-73 -591 -9 -524 INTERSECT\n" +
                "120 -530 209 -405 INTERSECT\n" +
                "120 -530 134 -490 INTERSECT\n" +
                "120 -530 -665 -594 INTERSECT\n" +
                "120 -530 103 -505 INTERSECT\n" +
                "120 -530 125 -500 INTERSECT\n" +
                "120 -530 174 -473 INTERSECT\n" +
                "120 -530 162 -512 INTERNAL\n" +
                "120 -530 -105 -561 INTERNAL\n" +
                "120 -530 -8 -530 INTERSECT\n" +
                "120 -530 27 -529 INTERSECT\n" +
                "120 -530 118 -507 INTERSECT\n" +
                "120 -530 101 -516 INTERSECT\n" +
                "120 -530 120 -517 INTERSECT\n" +
                "120 -530 155 -497 INTERSECT\n" +
                "120 -530 -274 -579 INTERSECT\n" +
                "120 -530 -196 -558 INTERSECT\n" +
                "120 -530 -30 -532 INTERSECT\n" +
                "120 -530 52 -514 INTERSECT\n" +
                "120 -530 -260 -566 INTERSECT\n" +
                "120 -530 -252 -564 INTERSECT\n" +
                "120 -530 -45 -530 INTERSECT\n" +
                "120 -530 -9 -524 INTERSECT\n" +
                "188 -559 134 -490 INTERSECT\n" +
                "188 -559 -665 -594 INTERSECT\n" +
                "188 -559 103 -505 INTERSECT\n" +
                "188 -559 125 -500 INTERSECT\n" +
                "188 -559 174 -473 INTERNAL\n" +
                "188 -559 162 -512 INTERNAL\n" +
                "188 -559 -105 -561 INTERSECT\n" +
                "188 -559 -8 -530 INTERSECT\n" +
                "188 -559 27 -529 INTERSECT\n" +
                "188 -559 118 -507 INTERSECT\n" +
                "188 -559 101 -516 INTERSECT\n" +
                "188 -559 120 -517 INTERSECT\n" +
                "188 -559 155 -497 INTERSECT\n" +
                "188 -559 -274 -579 INTERSECT\n" +
                "188 -559 -196 -558 INTERSECT\n" +
                "188 -559 -30 -532 INTERSECT\n" +
                "188 -559 52 -514 INTERSECT\n" +
                "188 -559 -260 -566 INTERSECT\n" +
                "188 -559 -252 -564 INTERSECT\n" +
                "188 -559 -45 -530 INTERSECT\n" +
                "188 -559 -9 -524 INTERSECT\n" +
                "209 -405 -665 -594 INTERSECT\n" +
                "209 -405 103 -505 INTERSECT\n" +
                "209 -405 125 -500 INTERSECT\n" +
                "209 -405 174 -473 INTERNAL\n" +
                "209 -405 162 -512 INTERNAL\n" +
                "209 -405 -105 -561 INTERSECT\n" +
                "209 -405 -8 -530 INTERSECT\n" +
                "209 -405 27 -529 INTERSECT\n" +
                "209 -405 118 -507 INTERSECT\n" +
                "209 -405 101 -516 INTERSECT\n" +
                "209 -405 120 -517 INTERSECT\n" +
                "209 -405 155 -497 INTERSECT\n" +
                "209 -405 -274 -579 INTERSECT\n" +
                "209 -405 -196 -558 INTERSECT\n" +
                "209 -405 -30 -532 INTERSECT\n" +
                "209 -405 52 -514 INTERSECT\n" +
                "209 -405 -260 -566 INTERSECT\n" +
                "209 -405 -252 -564 INTERSECT\n" +
                "209 -405 -45 -530 INTERSECT\n" +
                "209 -405 -9 -524 INTERSECT\n" +
                "134 -490 103 -505 INTERNAL\n" +
                "134 -490 125 -500 INTERNAL\n" +
                "134 -490 174 -473 INTERNAL\n" +
                "134 -490 162 -512 INTERSECT\n" +
                "134 -490 -105 -561 INTERSECT\n" +
                "134 -490 -8 -530 INTERSECT\n" +
                "134 -490 27 -529 INTERSECT\n" +
                "134 -490 118 -507 INTERSECT\n" +
                "134 -490 101 -516 INTERSECT\n" +
                "134 -490 120 -517 INTERSECT\n" +
                "134 -490 155 -497 INTERSECT\n" +
                "134 -490 -274 -579 INTERSECT\n" +
                "134 -490 -196 -558 INTERSECT\n" +
                "134 -490 -30 -532 INTERSECT\n" +
                "134 -490 52 -514 INTERSECT\n" +
                "134 -490 -260 -566 INTERSECT\n" +
                "134 -490 -252 -564 INTERSECT\n" +
                "134 -490 -45 -530 INTERSECT\n" +
                "134 -490 -9 -524 INTERSECT\n" +
                "-665 -594 125 -500 INTERNAL\n" +
                "-665 -594 174 -473 INTERSECT\n" +
                "-665 -594 162 -512 INTERSECT\n" +
                "-665 -594 -105 -561 INTERSECT\n" +
                "-665 -594 -8 -530 INTERSECT\n" +
                "-665 -594 27 -529 INTERSECT\n" +
                "-665 -594 118 -507 INTERSECT\n" +
                "-665 -594 101 -516 INTERSECT\n" +
                "-665 -594 120 -517 INTERSECT\n" +
                "-665 -594 155 -497 INTERSECT\n" +
                "-665 -594 -274 -579 INTERSECT\n" +
                "-665 -594 -196 -558 INTERSECT\n" +
                "-665 -594 -30 -532 INTERSECT\n" +
                "-665 -594 52 -514 INTERSECT\n" +
                "-665 -594 -260 -566 INTERSECT\n" +
                "-665 -594 -252 -564 INTERSECT\n" +
                "-665 -594 -45 -530 INTERSECT\n" +
                "-665 -594 -9 -524 INTERSECT\n" +
                "103 -505 174 -473 INTERNAL\n" +
                "103 -505 162 -512 INTERSECT\n" +
                "103 -505 -105 -561 INTERSECT\n" +
                "103 -505 -8 -530 INTERSECT\n" +
                "103 -505 27 -529 INTERSECT\n" +
                "103 -505 118 -507 INTERSECT\n" +
                "103 -505 101 -516 INTERSECT\n" +
                "103 -505 120 -517 INTERSECT\n" +
                "103 -505 155 -497 INTERSECT\n" +
                "103 -505 -274 -579 INTERSECT\n" +
                "103 -505 -196 -558 INTERSECT\n" +
                "103 -505 -30 -532 INTERSECT\n" +
                "103 -505 52 -514 INTERSECT\n" +
                "103 -505 -260 -566 INTERSECT\n" +
                "103 -505 -252 -564 INTERSECT\n" +
                "103 -505 -45 -530 INTERSECT\n" +
                "103 -505 -9 -524 INTERSECT\n" +
                "125 -500 162 -512 INTERSECT\n" +
                "125 -500 -105 -561 INTERSECT\n" +
                "125 -500 -8 -530 INTERSECT\n" +
                "125 -500 27 -529 INTERSECT\n" +
                "125 -500 118 -507 INTERSECT\n" +
                "125 -500 101 -516 INTERSECT\n" +
                "125 -500 120 -517 INTERSECT\n" +
                "125 -500 155 -497 INTERSECT\n" +
                "125 -500 -274 -579 INTERSECT\n" +
                "125 -500 -196 -558 INTERSECT\n" +
                "125 -500 -30 -532 INTERSECT\n" +
                "125 -500 52 -514 INTERSECT\n" +
                "125 -500 -260 -566 INTERSECT\n" +
                "125 -500 -252 -564 INTERSECT\n" +
                "125 -500 -45 -530 INTERSECT\n" +
                "125 -500 -9 -524 INTERSECT\n" +
                "174 -473 -105 -561 INTERSECT\n" +
                "174 -473 -8 -530 INTERSECT\n" +
                "174 -473 27 -529 INTERSECT\n" +
                "174 -473 118 -507 INTERSECT\n" +
                "174 -473 101 -516 INTERSECT\n" +
                "174 -473 120 -517 INTERSECT\n" +
                "174 -473 155 -497 INTERSECT\n" +
                "174 -473 -274 -579 INTERSECT\n" +
                "174 -473 -196 -558 INTERSECT\n" +
                "174 -473 -30 -532 INTERSECT\n" +
                "174 -473 52 -514 INTERSECT\n" +
                "174 -473 -260 -566 INTERSECT\n" +
                "174 -473 -252 -564 INTERSECT\n" +
                "174 -473 -45 -530 INTERSECT\n" +
                "174 -473 -9 -524 INTERSECT\n" +
                "162 -512 -8 -530 INTERSECT\n" +
                "162 -512 27 -529 EXTERNAL\n" +
                "162 -512 118 -507 INTERSECT\n" +
                "162 -512 101 -516 INTERSECT\n" +
                "162 -512 120 -517 EXTERNAL\n" +
                "162 -512 155 -497 EXTERNAL\n" +
                "162 -512 -274 -579 INTERSECT\n" +
                "162 -512 -196 -558 INTERSECT\n" +
                "162 -512 -30 -532 INTERSECT\n" +
                "162 -512 52 -514 INTERSECT\n" +
                "162 -512 -260 -566 INTERSECT\n" +
                "162 -512 -252 -564 INTERSECT\n" +
                "162 -512 -45 -530 INTERSECT\n" +
                "162 -512 -9 -524 INTERSECT\n" +
                "-105 -561 27 -529 EXTERNAL\n" +
                "-105 -561 118 -507 EXTERNAL\n" +
                "-105 -561 101 -516 EXTERNAL\n" +
                "-105 -561 120 -517 EXTERNAL\n" +
                "-105 -561 155 -497 INTERSECT\n" +
                "-105 -561 -274 -579 INTERNAL\n" +
                "-105 -561 -196 -558 INTERSECT\n" +
                "-105 -561 -30 -532 INTERSECT\n" +
                "-105 -561 52 -514 INTERSECT\n" +
                "-105 -561 -260 -566 INTERSECT\n" +
                "-105 -561 -252 -564 INTERSECT\n" +
                "-105 -561 -45 -530 INTERSECT\n" +
                "-105 -561 -9 -524 INTERSECT\n" +
                "-8 -530 118 -507 INTERNAL\n" +
                "-8 -530 101 -516 INTERSECT\n" +
                "-8 -530 120 -517 INTERSECT\n" +
                "-8 -530 155 -497 INTERNAL\n" +
                "-8 -530 -274 -579 INTERNAL\n" +
                "-8 -530 -196 -558 INTERSECT\n" +
                "-8 -530 -30 -532 INTERSECT\n" +
                "-8 -530 52 -514 INTERSECT\n" +
                "-8 -530 -260 -566 INTERSECT\n" +
                "-8 -530 -252 -564 INTERSECT\n" +
                "-8 -530 -45 -530 INTERSECT\n" +
                "-8 -530 -9 -524 INTERSECT\n" +
                "27 -529 101 -516 EXTERNAL\n" +
                "27 -529 120 -517 EXTERNAL\n" +
                "27 -529 155 -497 INTERNAL\n" +
                "27 -529 -274 -579 INTERSECT\n" +
                "27 -529 -196 -558 INTERSECT\n" +
                "27 -529 -30 -532 INTERSECT\n" +
                "27 -529 52 -514 INTERSECT\n" +
                "27 -529 -260 -566 INTERSECT\n" +
                "27 -529 -252 -564 INTERSECT\n" +
                "27 -529 -45 -530 INTERSECT\n" +
                "27 -529 -9 -524 INTERSECT\n" +
                "118 -507 120 -517 INTERNAL\n" +
                "118 -507 155 -497 INTERNAL\n" +
                "118 -507 -274 -579 INTERSECT\n" +
                "118 -507 -196 -558 INTERSECT\n" +
                "118 -507 -30 -532 INTERSECT\n" +
                "118 -507 52 -514 INTERSECT\n" +
                "118 -507 -260 -566 INTERSECT\n" +
                "118 -507 -252 -564 INTERSECT\n" +
                "118 -507 -45 -530 INTERSECT\n" +
                "118 -507 -9 -524 INTERSECT\n" +
                "101 -516 155 -497 INTERNAL\n" +
                "101 -516 -274 -579 INTERSECT\n" +
                "101 -516 -196 -558 INTERSECT\n" +
                "101 -516 -30 -532 INTERSECT\n" +
                "101 -516 52 -514 INTERSECT\n" +
                "101 -516 -260 -566 INTERSECT\n" +
                "101 -516 -252 -564 INTERSECT\n" +
                "101 -516 -45 -530 INTERSECT\n" +
                "101 -516 -9 -524 INTERSECT\n" +
                "120 -517 -274 -579 INTERSECT\n" +
                "120 -517 -196 -558 INTERSECT\n" +
                "120 -517 -30 -532 INTERSECT\n" +
                "120 -517 52 -514 INTERSECT\n" +
                "120 -517 -260 -566 INTERSECT\n" +
                "120 -517 -252 -564 INTERSECT\n" +
                "120 -517 -45 -530 INTERSECT\n" +
                "120 -517 -9 -524 INTERSECT\n" +
                "155 -497 -196 -558 INTERSECT\n" +
                "155 -497 -30 -532 EXTERNAL\n" +
                "155 -497 52 -514 EXTERNAL\n" +
                "155 -497 -260 -566 INTERSECT\n" +
                "155 -497 -252 -564 INTERSECT\n" +
                "155 -497 -45 -530 EXTERNAL\n" +
                "155 -497 -9 -524 EXTERNAL\n" +
                "-274 -579 -30 -532 EXTERNAL\n" +
                "-274 -579 52 -514 INTERSECT\n" +
                "-274 -579 -260 -566 INTERNAL\n" +
                "-274 -579 -252 -564 INTERSECT\n" +
                "-274 -579 -45 -530 INTERSECT\n" +
                "-274 -579 -9 -524 INTERSECT\n" +
                "-196 -558 52 -514 INTERNAL\n" +
                "-196 -558 -260 -566 INTERNAL\n" +
                "-196 -558 -252 -564 INTERSECT\n" +
                "-196 -558 -45 -530 INTERSECT\n" +
                "-196 -558 -9 -524 INTERSECT\n" +
                "-30 -532 -260 -566 INTERNAL\n" +
                "-30 -532 -252 -564 INTERSECT\n" +
                "-30 -532 -45 -530 INTERSECT\n" +
                "-30 -532 -9 -524 INTERSECT\n" +
                "52 -514 -252 -564 INTERSECT\n" +
                "52 -514 -45 -530 EXTERNAL\n" +
                "52 -514 -9 -524 EXTERNAL\n" +
                "-260 -566 -45 -530 EXTERNAL\n" +
                "-260 -566 -9 -524 EXTERNAL\n" +
                "-252 -564 -9 -524 INTERNAL");
        final List<Problem1.DiagonalResult> actual = Problem1.solve(points);
        assertEquals(expected, actual);
    }

    private List<Problem1.DiagonalResult> parseResult(String s) {
        String[] tokens = s.split("\\s+");
        if (tokens.length % 5 != 0) {
            throw new IllegalArgumentException("Illegal points: " + s);
        }
        int n = tokens.length / 5;
        List<Problem1.DiagonalResult> result = new ArrayList<>(n);
        for (int i = 0, j = 0; i < n; ++i) {
            final int x1 = Integer.parseInt(tokens[j++]);
            final int y1 = Integer.parseInt(tokens[j++]);
            final int x2 = Integer.parseInt(tokens[j++]);
            final int y2 = Integer.parseInt(tokens[j++]);
            final Problem1.DiagonalType state = Problem1.DiagonalType.valueOf(tokens[j++]);
            result.add(new Problem1.DiagonalResult(new Problem1.Point(x1, y1), new Problem1.Point(x2, y2), state));
        }
        return result;
    }

    private List<Problem1.Point> parsePoints(String s) {
        String[] tokens = s.split(" ");
        if (tokens.length % 2 != 0) {
            throw new IllegalArgumentException("Illegal points: " + s);
        }
        int n = tokens.length / 2;
        List<Problem1.Point> points = new ArrayList<>(n);
        for (int i = 0; i < n; ++i) {
            int x = Integer.parseInt(tokens[2 * i]);
            int y = Integer.parseInt(tokens[2 * i + 1]);
            points.add(new Problem1.Point(x, y));
        }
        return points;
    }
}